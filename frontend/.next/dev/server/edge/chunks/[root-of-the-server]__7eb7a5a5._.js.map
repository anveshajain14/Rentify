{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/frontend/middleware.js"],"sourcesContent":["import { NextResponse } from 'next/server';\r\n\r\nconst AUTH_PAGES = ['/login', '/register', '/verify-email', '/forgot-password', '/verify-login-otp'];\r\nconst PROTECTED_PREFIXES = ['/dashboard', '/profile', '/admin', '/seller/dashboard', '/cart', '/wishlist'];\r\n\r\nfunction isAuthPage(pathname) {\r\n  return AUTH_PAGES.some((p) => pathname === p || pathname.startsWith(p + '/'));\r\n}\r\n\r\nfunction isProtectedRoute(pathname) {\r\n  return PROTECTED_PREFIXES.some((p) => pathname.startsWith(p));\r\n}\r\n\r\nexport function middleware(request) {\r\n  const { pathname } = request.nextUrl;\r\n  const token = request.cookies.get('token')?.value;\r\n\r\n  if (token && isAuthPage(pathname) && !pathname.startsWith('/reset-password')) {\r\n    return NextResponse.redirect(new URL('/', request.url));\r\n  }\r\n\r\n  if (!token && isProtectedRoute(pathname)) {\r\n    const loginUrl = new URL('/login', request.url);\r\n    loginUrl.searchParams.set('redirect', pathname);\r\n    return NextResponse.redirect(loginUrl);\r\n  }\r\n\r\n  return NextResponse.next();\r\n}\r\n\r\nexport const config = {\r\n  matcher: [\r\n    '/((?!api|_next/static|_next/image|favicon.ico|.*\\\\.(?:svg|png|jpg|jpeg|gif|webp)$).*)',\r\n  ],\r\n};\r\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;;AAEA,MAAM,aAAa;IAAC;IAAU;IAAa;IAAiB;IAAoB;CAAoB;AACpG,MAAM,qBAAqB;IAAC;IAAc;IAAY;IAAU;IAAqB;IAAS;CAAY;AAE1G,SAAS,WAAW,QAAQ;IAC1B,OAAO,WAAW,IAAI,CAAC,CAAC,IAAM,aAAa,KAAK,SAAS,UAAU,CAAC,IAAI;AAC1E;AAEA,SAAS,iBAAiB,QAAQ;IAChC,OAAO,mBAAmB,IAAI,CAAC,CAAC,IAAM,SAAS,UAAU,CAAC;AAC5D;AAEO,SAAS,WAAW,OAAO;IAChC,MAAM,EAAE,QAAQ,EAAE,GAAG,QAAQ,OAAO;IACpC,MAAM,QAAQ,QAAQ,OAAO,CAAC,GAAG,CAAC,UAAU;IAE5C,IAAI,SAAS,WAAW,aAAa,CAAC,SAAS,UAAU,CAAC,oBAAoB;QAC5E,OAAO,4MAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,KAAK,QAAQ,GAAG;IACvD;IAEA,IAAI,CAAC,SAAS,iBAAiB,WAAW;QACxC,MAAM,WAAW,IAAI,IAAI,UAAU,QAAQ,GAAG;QAC9C,SAAS,YAAY,CAAC,GAAG,CAAC,YAAY;QACtC,OAAO,4MAAY,CAAC,QAAQ,CAAC;IAC/B;IAEA,OAAO,4MAAY,CAAC,IAAI;AAC1B;AAEO,MAAM,SAAS;IACpB,SAAS;QACP;KACD;AACH"}}]
}