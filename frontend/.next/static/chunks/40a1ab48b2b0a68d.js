(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,86051,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"warnOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},80380,e=>{"use strict";let t=(0,e.i(35884).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],80380)},96086,(e,t,a)=>{t.exports=e.r(9187)},23868,e=>{"use strict";var t=e.i(48277),a=e.i(79036),r=e.i(5619),s=e.i(36405),l=e.i(33672),d=e.i(96086),i=e.i(35691),o=e.i(50097);let c=(0,e.i(35884).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var n=e.i(80380),u=e.i(42588),x=e.i(16506),p=e.i(30668),m=e.i(18033),h=e.i(94744);function b(e){let t=new Date(e.startDate).getTime(),a=Math.max(1,Math.ceil((new Date(e.endDate).getTime()-t)/864e5));return"week"===e.duration?Math.ceil(a/7)*(e.product.pricePerWeek??7*e.product.pricePerDay):"month"===e.duration?Math.ceil(a/30)*(e.product.pricePerMonth??30*e.product.pricePerDay):a*e.product.pricePerDay}function y(){let e=(0,a.useDispatch)(),y=(0,d.useRouter)(),{user:g}=(0,a.useSelector)(e=>e.auth),{items:f}=(0,a.useSelector)(e=>e.cart),[j,v]=(0,p.useState)(!1),D=f.reduce((e,t)=>e+b(t),0),N=async()=>{if(!g)return h.toast.error("Please login to checkout"),y.push("/login");if(0===f.length)return void h.toast.error("Cart is empty");v(!0);try{let t=f.map(e=>({productId:e.productId,startDate:e.startDate,endDate:e.endDate,totalAmount:b(e)})),a=await m.default.post("/api/rentals/checkout-cart",{items:t});a.data.url&&(e((0,r.clearCart)()),window.location.href=a.data.url)}catch(e){h.toast.error(e.response?.data?.message||"Checkout failed")}finally{v(!1)}};return(0,t.jsxs)("main",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(s.default,{}),(0,t.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 pt-28 pb-20",children:[(0,t.jsxs)("h1",{className:"text-3xl font-black tracking-tighter text-black mb-8 flex items-center gap-2",children:[(0,t.jsx)(o.ShoppingCart,{size:32})," Cart (",f.length,")"]}),0===f.length?(0,t.jsxs)(i.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"py-24 text-center bg-white rounded-3xl border border-dashed border-gray-200",children:[(0,t.jsx)(o.ShoppingCart,{className:"mx-auto text-gray-300 mb-4",size:56}),(0,t.jsx)("p",{className:"text-gray-600 font-medium mb-4",children:"Your cart is empty"}),(0,t.jsx)(x.default,{href:"/products",className:"inline-block px-8 py-3 bg-emerald-600 text-white rounded-2xl font-bold hover:bg-emerald-500",children:"Browse rentals"})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[f.map(a=>(0,t.jsxs)(i.motion.div,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white rounded-3xl border border-gray-100 p-6 shadow-sm flex flex-col sm:flex-row gap-6",children:[(0,t.jsx)("div",{className:"relative w-full sm:w-32 aspect-square rounded-2xl overflow-hidden bg-gray-100 flex-shrink-0",children:(0,t.jsx)(u.default,{src:a.product.images[0],alt:a.product.title,fill:!0,className:"object-cover"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)(x.default,{href:`/products/${a.productId}`,className:"font-bold text-lg text-black hover:text-emerald-600 line-clamp-1",children:a.product.title}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 mb-4",children:["$",a.product.pricePerDay,"/day"]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-bold text-gray-400 uppercase",children:"Start"}),(0,t.jsx)("input",{type:"date",value:a.startDate,onChange:t=>e((0,r.updateCartItemDates)({productId:a.productId,startDate:t.target.value,endDate:a.endDate,duration:a.duration})),className:"w-full mt-1 px-3 py-2 rounded-xl border border-gray-200 text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-bold text-gray-400 uppercase",children:"End"}),(0,t.jsx)("input",{type:"date",value:a.endDate,onChange:t=>e((0,r.updateCartItemDates)({productId:a.productId,startDate:a.startDate,endDate:t.target.value,duration:a.duration})),className:"w-full mt-1 px-3 py-2 rounded-xl border border-gray-200 text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-xs font-bold text-gray-400 uppercase",children:"Duration"}),(0,t.jsxs)("select",{value:a.duration,onChange:t=>e((0,r.updateCartItemDates)({productId:a.productId,startDate:a.startDate,endDate:a.endDate,duration:t.target.value})),className:"w-full mt-1 px-3 py-2 rounded-xl border border-gray-200 text-sm",children:[(0,t.jsx)("option",{value:"day",children:"Daily"}),(0,t.jsx)("option",{value:"week",children:"Weekly"}),(0,t.jsx)("option",{value:"month",children:"Monthly"})]})]})]})]}),(0,t.jsxs)("div",{className:"flex sm:flex-col justify-between sm:items-end gap-2",children:[(0,t.jsxs)("p",{className:"text-xl font-black text-black",children:["$",b(a).toFixed(2)]}),(0,t.jsx)("button",{onClick:()=>e((0,r.removeFromCart)(a.productId)),className:"p-2 rounded-xl text-red-600 hover:bg-red-50",children:(0,t.jsx)(c,{size:18})})]})]},a.productId)),(0,t.jsxs)("div",{className:"bg-white rounded-3xl border border-gray-100 p-8 flex flex-col sm:flex-row justify-between items-stretch sm:items-center gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-500 font-medium",children:"Subtotal"}),(0,t.jsxs)("p",{className:"text-3xl font-black text-black",children:["$",D.toFixed(2)]})]}),(0,t.jsx)("button",{onClick:N,disabled:j,className:"px-10 py-4 bg-emerald-600 text-white rounded-2xl font-bold hover:bg-emerald-500 flex items-center justify-center gap-2 disabled:opacity-50",children:j?(0,t.jsx)(n.Loader2,{className:"animate-spin",size:22}):"Proceed to checkout"})]})]})]}),(0,t.jsx)(l.default,{})]})}e.s(["default",()=>y],23868)}]);