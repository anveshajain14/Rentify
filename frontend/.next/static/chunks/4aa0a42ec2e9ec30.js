(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,86051,(e,a,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"warnOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},82087,e=>{"use strict";let a=(0,e.i(35884).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["Mail",()=>a],82087)},80380,e=>{"use strict";let a=(0,e.i(35884).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>a],80380)},96086,(e,a,t)=>{a.exports=e.r(9187)},52443,e=>{"use strict";let a=(0,e.i(35884).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>a],52443)},40380,e=>{"use strict";let a=(0,e.i(35884).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>a],40380)},44010,e=>{"use strict";var a=e.i(48277),t=e.i(30668),s=e.i(79036),r=e.i(40672),l=e.i(18033),i=e.i(96086),o=e.i(16506),n=e.i(94744),d=e.i(35691),c=e.i(82087),u=e.i(40380),m=e.i(52443),h=e.i(80380),x=e.i(36405),p=e.i(33672);function b(){let[e,b]=(0,t.useState)(""),[y,f]=(0,t.useState)(""),[g,j]=(0,t.useState)(!1),[v,w]=(0,t.useState)(null),[N,k]=(0,t.useState)(!1),C=(0,s.useDispatch)(),z=(0,i.useRouter)(),R=async a=>{a.preventDefault(),w(null),j(!0);try{let a=await l.default.post("/api/auth/login",{email:e,password:y});if(a.data.requiresOtp){n.toast.success(a.data.message||"Check your email for the login code"),z.push(`/verify-login-otp?email=${encodeURIComponent(a.data.email||e)}`);return}C((0,r.setUser)(a.data.user)),n.toast.success("Welcome back!"),a.data.user?.role==="renter"?z.push("/discover"):z.push("/dashboard")}catch(t){let a=t.response?.data;if(a?.requiresVerification){w(a?.email||e),n.toast.error(a?.message||"Please verify your email");return}n.toast.error(a?.message||"Login failed")}finally{j(!1)}},S=async()=>{if(v){k(!0);try{await l.default.post("/api/auth/resend-verification-otp",{email:v}),n.toast.success("Verification code sent! Check your email."),z.push(`/verify-email?email=${encodeURIComponent(v)}`)}catch(e){n.toast.error(e.response?.data?.message||"Resend failed")}finally{k(!1)}}};return(0,a.jsxs)("main",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(x.default,{}),(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen pt-20 px-4",children:(0,a.jsxs)(d.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-md w-full bg-white rounded-[40px] shadow-2xl shadow-black/5 p-10 border border-gray-100",children:[(0,a.jsxs)("div",{className:"text-center mb-10",children:[(0,a.jsx)("h1",{className:"text-3xl font-black tracking-tighter text-black mb-2",children:"Welcome Back"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Enter your credentials to access your account"})]}),(0,a.jsxs)("form",{onSubmit:R,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-bold text-gray-700 ml-1",children:"Email Address"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c.Mail,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:18}),(0,a.jsx)("input",{type:"email",value:e,onChange:e=>b(e.target.value),className:"w-full pl-12 pr-4 py-4 bg-gray-50 border border-transparent rounded-2xl focus:bg-white focus:border-emerald-500 transition-all outline-none",placeholder:"name@example.com",required:!0})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("label",{className:"text-sm font-bold text-gray-700 ml-1",children:"Password"}),(0,a.jsx)(o.default,{href:"/forgot-password",className:"text-sm text-emerald-600 font-medium hover:underline",children:"Forgot password?"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u.Lock,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:18}),(0,a.jsx)("input",{type:"password",value:y,onChange:e=>f(e.target.value),className:"w-full pl-12 pr-4 py-4 bg-gray-50 border border-transparent rounded-2xl focus:bg-white focus:border-emerald-500 transition-all outline-none",placeholder:"••••••••",required:!0})]})]}),(0,a.jsx)("button",{type:"submit",disabled:g,className:"w-full py-4 bg-black text-white rounded-2xl font-bold flex items-center justify-center gap-2 hover:bg-gray-800 transition-all shadow-xl shadow-black/10 disabled:opacity-50",children:g?(0,a.jsx)(h.Loader2,{className:"animate-spin",size:20}):(0,a.jsxs)(a.Fragment,{children:["Sign In ",(0,a.jsx)(m.ArrowRight,{size:18})]})}),v&&(0,a.jsxs)("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/20 rounded-2xl border border-amber-200 dark:border-amber-800",children:[(0,a.jsx)("p",{className:"text-sm text-amber-800 dark:text-amber-200 mb-3",children:"Please verify your email to sign in."}),(0,a.jsx)("button",{type:"button",onClick:S,disabled:N,className:"w-full py-3 bg-amber-600 text-white rounded-xl font-bold text-sm hover:bg-amber-700 disabled:opacity-50",children:N?(0,a.jsx)(h.Loader2,{className:"animate-spin mx-auto",size:20}):"Resend Verification Code"})]})]}),(0,a.jsx)("div",{className:"mt-10 text-center text-sm",children:(0,a.jsxs)("p",{className:"text-gray-500",children:["Don't have an account?"," ",(0,a.jsx)(o.default,{href:"/register",className:"text-emerald-600 font-bold hover:underline",children:"Create Account"})]})})]})}),(0,a.jsx)(p.default,{})]})}e.s(["default",()=>b])}]);