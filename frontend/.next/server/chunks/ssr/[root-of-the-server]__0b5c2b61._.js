module.exports=[2057,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored.contexts.AppRouterContext},1395,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored["react-ssr"].ReactServerDOMTurbopackClient},97134,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored["react-ssr"].ReactDOM},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},3420,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored.contexts.HooksClientContext},98823,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored.contexts.ServerInsertedHtml},69355,a=>{"use strict";let b=(0,a.i(31261).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],69355)},82613,a=>{"use strict";var b=a.i(57850),c=a.i(68458),d=a.i(76212),e=a.i(77703),f=a.i(81896),g=a.i(93609),h=a.i(50813),i=a.i(81353);let j=(0,a.i(31261).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var k=a.i(69355),l=a.i(70579),m=a.i(59843),n=a.i(45056),o=a.i(73951),p=a.i(30796);function q(a){let b=new Date(a.startDate).getTime(),c=Math.max(1,Math.ceil((new Date(a.endDate).getTime()-b)/864e5));return"week"===a.duration?Math.ceil(c/7)*(a.product.pricePerWeek??7*a.product.pricePerDay):"month"===a.duration?Math.ceil(c/30)*(a.product.pricePerMonth??30*a.product.pricePerDay):c*a.product.pricePerDay}function r(){let a=(0,c.useDispatch)(),r=(0,g.useRouter)(),{user:s}=(0,c.useSelector)(a=>a.auth),{items:t}=(0,c.useSelector)(a=>a.cart),[u,v]=(0,n.useState)(!1),w=t.reduce((a,b)=>a+q(b),0),x=async()=>{if(!s)return p.toast.error("Please login to checkout"),r.push("/login");if(0===t.length)return void p.toast.error("Cart is empty");v(!0);try{let b=t.map(a=>({productId:a.productId,startDate:a.startDate,endDate:a.endDate,totalAmount:q(a)})),c=await o.default.post("/api/rentals/checkout-cart",{items:b});c.data.url&&(a((0,d.clearCart)()),window.location.href=c.data.url)}catch(a){p.toast.error(a.response?.data?.message||"Checkout failed")}finally{v(!1)}};return(0,b.jsxs)("main",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)(e.default,{}),(0,b.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 pt-28 pb-20",children:[(0,b.jsxs)("h1",{className:"text-3xl font-black tracking-tighter text-black mb-8 flex items-center gap-2",children:[(0,b.jsx)(i.ShoppingCart,{size:32})," Cart (",t.length,")"]}),0===t.length?(0,b.jsxs)(h.motion.div,{initial:{opacity:0},animate:{opacity:1},className:"py-24 text-center bg-white rounded-3xl border border-dashed border-gray-200",children:[(0,b.jsx)(i.ShoppingCart,{className:"mx-auto text-gray-300 mb-4",size:56}),(0,b.jsx)("p",{className:"text-gray-600 font-medium mb-4",children:"Your cart is empty"}),(0,b.jsx)(m.default,{href:"/products",className:"inline-block px-8 py-3 bg-emerald-600 text-white rounded-2xl font-bold hover:bg-emerald-500",children:"Browse rentals"})]}):(0,b.jsxs)("div",{className:"space-y-6",children:[t.map(c=>(0,b.jsxs)(h.motion.div,{layout:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white rounded-3xl border border-gray-100 p-6 shadow-sm flex flex-col sm:flex-row gap-6",children:[(0,b.jsx)("div",{className:"relative w-full sm:w-32 aspect-square rounded-2xl overflow-hidden bg-gray-100 flex-shrink-0",children:(0,b.jsx)(l.default,{src:c.product.images[0],alt:c.product.title,fill:!0,className:"object-cover"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)(m.default,{href:`/products/${c.productId}`,className:"font-bold text-lg text-black hover:text-emerald-600 line-clamp-1",children:c.product.title}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 mb-4",children:["$",c.product.pricePerDay,"/day"]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs font-bold text-gray-400 uppercase",children:"Start"}),(0,b.jsx)("input",{type:"date",value:c.startDate,onChange:b=>a((0,d.updateCartItemDates)({productId:c.productId,startDate:b.target.value,endDate:c.endDate,duration:c.duration})),className:"w-full mt-1 px-3 py-2 rounded-xl border border-gray-200 text-sm"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs font-bold text-gray-400 uppercase",children:"End"}),(0,b.jsx)("input",{type:"date",value:c.endDate,onChange:b=>a((0,d.updateCartItemDates)({productId:c.productId,startDate:c.startDate,endDate:b.target.value,duration:c.duration})),className:"w-full mt-1 px-3 py-2 rounded-xl border border-gray-200 text-sm"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-xs font-bold text-gray-400 uppercase",children:"Duration"}),(0,b.jsxs)("select",{value:c.duration,onChange:b=>a((0,d.updateCartItemDates)({productId:c.productId,startDate:c.startDate,endDate:c.endDate,duration:b.target.value})),className:"w-full mt-1 px-3 py-2 rounded-xl border border-gray-200 text-sm",children:[(0,b.jsx)("option",{value:"day",children:"Daily"}),(0,b.jsx)("option",{value:"week",children:"Weekly"}),(0,b.jsx)("option",{value:"month",children:"Monthly"})]})]})]})]}),(0,b.jsxs)("div",{className:"flex sm:flex-col justify-between sm:items-end gap-2",children:[(0,b.jsxs)("p",{className:"text-xl font-black text-black",children:["$",q(c).toFixed(2)]}),(0,b.jsx)("button",{onClick:()=>a((0,d.removeFromCart)(c.productId)),className:"p-2 rounded-xl text-red-600 hover:bg-red-50",children:(0,b.jsx)(j,{size:18})})]})]},c.productId)),(0,b.jsxs)("div",{className:"bg-white rounded-3xl border border-gray-100 p-8 flex flex-col sm:flex-row justify-between items-stretch sm:items-center gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500 font-medium",children:"Subtotal"}),(0,b.jsxs)("p",{className:"text-3xl font-black text-black",children:["$",w.toFixed(2)]})]}),(0,b.jsx)("button",{onClick:x,disabled:u,className:"px-10 py-4 bg-emerald-600 text-white rounded-2xl font-bold hover:bg-emerald-500 flex items-center justify-center gap-2 disabled:opacity-50",children:u?(0,b.jsx)(k.Loader2,{className:"animate-spin",size:22}):"Proceed to checkout"})]})]})]}),(0,b.jsx)(f.default,{})]})}a.s(["default",()=>r],82613)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__0b5c2b61._.js.map