{"version":3,"sources":["../../../../../frontend/store/provider.jsx","../../../../../frontend/store/index.js","../../../../../frontend/node_modules/orchids-visual-edits/src/VisualEditsMessenger.tsx","../../../../../frontend/node_modules/orchids-visual-edits/src/index.ts","../../../../../frontend/components/AuthBootstrapper.jsx","../../../../../frontend/components/CartPersistence.jsx"],"sourcesContent":["'use client';\r\n\r\nimport { Provider } from 'react-redux';\r\nimport { store } from './index';\r\n\r\nexport function ReduxProvider({ children }) {\r\n  return <Provider store={store}>{children}</Provider>;\r\n}\r\n","import { configureStore } from '@reduxjs/toolkit';\r\nimport authReducer from './slices/authSlice';\r\nimport cartReducer from './slices/cartSlice';\r\nimport wishlistReducer from './slices/wishlistSlice';\r\nimport filtersReducer from './slices/filtersSlice';\r\nimport recentlyViewedReducer from './slices/recentlyViewedSlice';\r\n\r\nexport const store = configureStore({\r\n  reducer: {\r\n    auth: authReducer,\r\n    cart: cartReducer,\r\n    wishlist: wishlistReducer,\r\n    filters: filtersReducer,\r\n    recentlyViewed: recentlyViewedReducer,\r\n  },\r\n});\r\n","// Next.js App Router directive: marks this as a Client Component\n// Required for components using React hooks and browser APIs\n// Harmless in other React frameworks (ignored as a string literal)\n\"use client\";\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { useEffect, useState, useRef } from \"react\";\n\nexport const CHANNEL = \"ORCHIDS_HOVER_v1\" as const;\nconst VISUAL_EDIT_MODE_KEY = \"orchids_visual_edit_mode\" as const;\nconst FOCUSED_ELEMENT_KEY = \"orchids_focused_element\" as const;\n\n// Deduplicate helper for high-frequency traffic (HIT / FOCUS_MOVED / SCROLL)\n// -----------------------------------------------------------------------------\nlet _orchidsLastMsg = \"\";\nconst postMessageDedup = (data: any) => {\n  try {\n    const key = JSON.stringify(data);\n    if (key === _orchidsLastMsg) return; // identical – drop\n    _orchidsLastMsg = key;\n  } catch {\n    // if stringify fails, fall through\n  }\n  window.parent.postMessage(data, \"*\");\n};\n\nexport type ParentToChild =\n  | { type: typeof CHANNEL; msg: \"POINTER\"; x: number; y: number }\n  | { type: typeof CHANNEL; msg: \"VISUAL_EDIT_MODE\"; active: boolean }\n  | { type: typeof CHANNEL; msg: \"SCROLL\"; dx: number; dy: number }\n  | { type: typeof CHANNEL; msg: \"CLEAR_INLINE_STYLES\"; elementId: string }\n  | {\n      type: typeof CHANNEL;\n      msg: \"PREVIEW_FONT\";\n      elementId: string;\n      fontFamily: string;\n    }\n  | {\n      type: typeof CHANNEL;\n      msg: \"RESIZE_ELEMENT\";\n      elementId: string;\n      width: number;\n      height: number;\n    }\n  | {\n      type: typeof CHANNEL;\n      msg: \"SHOW_ELEMENT_HOVER\";\n      elementId: string | null;\n    };\n\nexport type ChildToParent =\n  | {\n      type: typeof CHANNEL;\n      msg: \"HIT\";\n      id: string | null;\n      tag: string | null;\n      rect: { top: number; left: number; width: number; height: number } | null;\n    }\n  | {\n      type: typeof CHANNEL;\n      msg: \"ELEMENT_CLICKED\";\n      id: string | null;\n      tag: string | null;\n      rect: { top: number; left: number; width: number; height: number };\n      clickPosition: { x: number; y: number };\n      isEditable?: boolean;\n      currentStyles?: {\n        fontSize?: string;\n        color?: string;\n        fontWeight?: string;\n        fontStyle?: string;\n        textDecoration?: string;\n        textAlign?: string;\n        lineHeight?: string;\n        letterSpacing?: string;\n        paddingLeft?: string;\n        paddingRight?: string;\n        paddingTop?: string;\n        paddingBottom?: string;\n        marginLeft?: string;\n        marginRight?: string;\n        marginTop?: string;\n        marginBottom?: string;\n        backgroundColor?: string;\n        backgroundImage?: string;\n        borderRadius?: string;\n        fontFamily?: string;\n        opacity?: string;\n        display?: string;\n        flexDirection?: string;\n        alignItems?: string;\n        justifyContent?: string;\n        gap?: string;\n      };\n      className?: string;\n      src?: string;\n    }\n  | { type: typeof CHANNEL; msg: \"SCROLL_STARTED\" }\n  | { type: typeof CHANNEL; msg: \"SCROLL_STOPPED\" }\n  | {\n      type: typeof CHANNEL;\n      msg: \"TEXT_CHANGED\";\n      id: string;\n      oldText: string;\n      newText: string;\n      filePath: string;\n      line: number;\n      column: number;\n    }\n  | {\n      type: typeof CHANNEL;\n      msg: \"STYLE_CHANGED\";\n      id: string;\n      styles: Record<string, string>;\n      filePath: string;\n      line: number;\n      column: number;\n    }\n  | {\n      type: typeof CHANNEL;\n      msg: \"STYLE_BLUR\";\n      id: string;\n      styles: Record<string, string>;\n      filePath: string;\n      line: number;\n      column: number;\n      className: string;\n    }\n  | {\n      type: typeof CHANNEL;\n      msg: \"IMAGE_BLUR\";\n      id: string;\n      oldSrc: string;\n      newSrc: string;\n      filePath: string;\n      line: number;\n      column: number;\n    }\n  | {\n      type: typeof CHANNEL;\n      msg: \"FOCUS_MOVED\";\n      id: string;\n      rect: { top: number; left: number; width: number; height: number };\n    }\n  | { type: typeof CHANNEL; msg: \"VISUAL_EDIT_MODE_ACK\"; active: boolean }\n  | { type: typeof CHANNEL; msg: \"VISUAL_EDIT_MODE_RESTORED\"; active: boolean };\n\ntype Box = null | { top: number; left: number; width: number; height: number };\n\nconst BOX_PADDING = 4; // Pixels to expand the box on each side\n\n// Helper to check if element can be made contentEditable\nconst isTextEditable = (element: HTMLElement): boolean => {\n  const tagName = element.tagName.toLowerCase();\n  // Elements that typically contain text and can be made contentEditable\n  const editableTags = [\n    \"p\",\n    \"h1\",\n    \"h2\",\n    \"h3\",\n    \"h4\",\n    \"h5\",\n    \"h6\",\n    \"span\",\n    \"div\",\n    \"li\",\n    \"td\",\n    \"th\",\n    \"label\",\n    \"a\",\n    \"button\",\n  ];\n\n  // Check if it's already contentEditable or an input/textarea\n  if (\n    element.contentEditable === \"true\" ||\n    tagName === \"input\" ||\n    tagName === \"textarea\"\n  ) {\n    return true;\n  }\n\n  // Allow editing if element contains text and is an editable tag\n  // Only allow editing if element has at most 1 child OR has direct text content\n  if (editableTags.includes(tagName) && element.textContent?.trim()) {\n    // Check if element has direct text nodes (not just text from children)\n    const hasDirectText = Array.from(element.childNodes).some(\n      (node) => node.nodeType === Node.TEXT_NODE && node.textContent?.trim()\n    );\n\n    // Allow editing if:\n    // 1. Element has no children (pure text element)\n    // 2. Element has 1 or fewer children AND has direct text content\n    if (\n      element.childElementCount === 0 ||\n      (element.childElementCount <= 1 && hasDirectText)\n    ) {\n      return true;\n    }\n  }\n\n  return false;\n};\n\n// Helper to extract only text nodes from an element (excluding child element text)\nconst extractDirectTextContent = (element: HTMLElement): string => {\n  let text = \"\";\n  for (const node of element.childNodes) {\n    if (node.nodeType === Node.TEXT_NODE) {\n      text += node.textContent || \"\";\n    }\n  }\n  return text;\n};\n\n// Helper to parse data-orchids-id to extract file path, line, and column\nconst parseOrchidsId = (\n  orchidsId: string\n): { filePath: string; line: number; column: number } | null => {\n  // Format: \"filepath:line:column\"\n  const parts = orchidsId.split(\":\");\n  if (parts.length < 3) return null;\n\n  // The file path might contain colons, so we need to handle that\n  const column = parseInt(parts.pop() || \"0\");\n  const line = parseInt(parts.pop() || \"0\");\n  const filePath = parts.join(\":\"); // Rejoin the remaining parts as the file path\n\n  if (isNaN(line) || isNaN(column)) return null;\n\n  return { filePath, line, column };\n};\n\n// Helper to get current styles of an element (including inline styles)\nconst getCurrentStyles = (\n  element: HTMLElement\n): {\n  fontSize?: string;\n  color?: string;\n  fontWeight?: string;\n  fontStyle?: string;\n  textDecoration?: string;\n  textAlign?: string;\n  lineHeight?: string;\n  letterSpacing?: string;\n  paddingLeft?: string;\n  paddingRight?: string;\n  paddingTop?: string;\n  paddingBottom?: string;\n  marginLeft?: string;\n  marginRight?: string;\n  marginTop?: string;\n  marginBottom?: string;\n  backgroundColor?: string;\n  backgroundImage?: string;\n  borderRadius?: string;\n  fontFamily?: string;\n  opacity?: string;\n  display?: string;\n  flexDirection?: string;\n  alignItems?: string;\n  justifyContent?: string;\n  gap?: string;\n} => {\n  const computed = window.getComputedStyle(element);\n\n  // Helper to normalize values and provide defaults\n  const normalizeValue = (value: string, property: string): string => {\n    // Handle background color - if it's transparent or rgba(0,0,0,0), return \"transparent\"\n    if (property === \"backgroundColor\") {\n      if (\n        value === \"rgba(0, 0, 0, 0)\" ||\n        value === \"rgb(0, 0, 0, 0)\" ||\n        value === \"transparent\" ||\n        value === \"\"\n      ) {\n        return \"transparent\";\n      }\n    }\n\n    // Handle background image - if none, return \"none\"\n    if (property === \"backgroundImage\" && (value === \"none\" || value === \"\")) {\n      return \"none\";\n    }\n\n    // Handle text decoration - if none, return \"none\"\n    if (property === \"textDecoration\") {\n      // Some browsers return complex values like \"none solid rgb(0, 0, 0)\"\n      if (value.includes(\"none\") || value === \"\") {\n        return \"none\";\n      }\n    }\n\n    // Handle font style - if normal, return \"normal\"\n    if (property === \"fontStyle\" && (value === \"normal\" || value === \"\")) {\n      return \"normal\";\n    }\n\n    // Handle font weight - normalize to standard values\n    if (property === \"fontWeight\") {\n      const weight = parseInt(value);\n      if (!isNaN(weight)) {\n        return String(weight);\n      }\n      return value || \"400\";\n    }\n\n    // Handle opacity - if 1, return \"1\"\n    if (property === \"opacity\" && (value === \"1\" || value === \"\")) {\n      return \"1\";\n    }\n\n    // Handle spacing values (padding/margin) - if 0px, return \"0\"\n    if (\n      (property.includes(\"padding\") || property.includes(\"margin\")) &&\n      (value === \"0px\" || value === \"0\")\n    ) {\n      return \"0\";\n    }\n\n    // Handle border radius - if 0px, return \"0\"\n    if (property === \"borderRadius\" && (value === \"0px\" || value === \"0\")) {\n      return \"0\";\n    }\n\n    // Handle letter spacing - if normal, return \"normal\"\n    if (\n      property === \"letterSpacing\" &&\n      (value === \"normal\" || value === \"0px\")\n    ) {\n      return \"normal\";\n    }\n\n    // Handle gap - if normal, return \"normal\"\n    if (property === \"gap\" && (value === \"normal\" || value === \"0px\")) {\n      return \"normal\";\n    }\n\n    return value;\n  };\n\n  return {\n    fontSize: normalizeValue(computed.fontSize, \"fontSize\"),\n    color: normalizeValue(computed.color, \"color\"),\n    fontWeight: normalizeValue(computed.fontWeight, \"fontWeight\"),\n    fontStyle: normalizeValue(computed.fontStyle, \"fontStyle\"),\n    textDecoration: normalizeValue(computed.textDecoration, \"textDecoration\"),\n    textAlign: normalizeValue(computed.textAlign, \"textAlign\"),\n    lineHeight: normalizeValue(computed.lineHeight, \"lineHeight\"),\n    letterSpacing: normalizeValue(computed.letterSpacing, \"letterSpacing\"),\n    paddingLeft: normalizeValue(computed.paddingLeft, \"paddingLeft\"),\n    paddingRight: normalizeValue(computed.paddingRight, \"paddingRight\"),\n    paddingTop: normalizeValue(computed.paddingTop, \"paddingTop\"),\n    paddingBottom: normalizeValue(computed.paddingBottom, \"paddingBottom\"),\n    marginLeft: normalizeValue(computed.marginLeft, \"marginLeft\"),\n    marginRight: normalizeValue(computed.marginRight, \"marginRight\"),\n    marginTop: normalizeValue(computed.marginTop, \"marginTop\"),\n    marginBottom: normalizeValue(computed.marginBottom, \"marginBottom\"),\n    backgroundColor: normalizeValue(\n      computed.backgroundColor,\n      \"backgroundColor\"\n    ),\n    backgroundImage: normalizeValue(\n      computed.backgroundImage,\n      \"backgroundImage\"\n    ),\n    borderRadius: normalizeValue(computed.borderRadius, \"borderRadius\"),\n    fontFamily: normalizeValue(computed.fontFamily, \"fontFamily\"),\n    opacity: normalizeValue(computed.opacity, \"opacity\"),\n    display: normalizeValue(computed.display, \"display\"),\n    flexDirection: normalizeValue(computed.flexDirection, \"flexDirection\"),\n    alignItems: normalizeValue(computed.alignItems, \"alignItems\"),\n    justifyContent: normalizeValue(computed.justifyContent, \"justifyContent\"),\n    gap: normalizeValue(computed.gap, \"gap\"),\n  };\n};\n\n// Normalize image src for comparison (handles Next.js optimization wrappers)\nconst normalizeImageSrc = (input: string): string => {\n  if (!input) return \"\";\n  try {\n    const url = new URL(input, window.location.origin);\n    // Handle Next.js <Image> optimization wrapper\n    if (url.pathname === \"/_next/image\") {\n      const real = url.searchParams.get(\"url\");\n      if (real) return decodeURIComponent(real);\n    }\n    return url.href; // absolute form\n  } catch {\n    return input;\n  }\n};\n\n// Helper to wrap multiline text only when it contains line breaks\nconst wrapMultiline = (text: string): string => {\n  if (text.includes(\"\\n\")) {\n    const escaped = text.replace(/\\n/g, \"\\\\n\");\n    // Wrap in {` ... `} so JSX will interpret it as a template literal\n    return `{\\`${escaped}\\`}`;\n  }\n  return text;\n};\n\nexport default function HoverReceiver() {\n  const [hoverBox, setHoverBox] = useState<Box>(null);\n  const [hoverBoxes, setHoverBoxes] = useState<Box[]>([]);\n  const [focusBox, setFocusBox] = useState<Box>(null);\n  const [focusedElementId, setFocusedElementId] = useState<string | null>(null);\n  const [isVisualEditMode, setIsVisualEditMode] = useState(() => {\n    // Initialize from localStorage if available\n    if (typeof window !== \"undefined\") {\n      const stored = localStorage.getItem(VISUAL_EDIT_MODE_KEY);\n      return stored === \"true\";\n    }\n    return false;\n  });\n  const [isResizing, setIsResizing] = useState(false);\n  const [resizeHandle, setResizeHandle] = useState<string | null>(null);\n  const [resizeStart, setResizeStart] = useState<{\n    x: number;\n    y: number;\n    width: number;\n    height: number;\n  } | null>(null);\n  const [isScrolling, setIsScrolling] = useState(false);\n\n  // Tag labels for hover and focus overlays\n  const [hoverTag, setHoverTag] = useState<string | null>(null);\n  const [focusTag, setFocusTag] = useState<string | null>(null);\n  const isResizingRef = useRef(false);\n  const lastHitElementRef = useRef<HTMLElement | null>(null);\n  const lastHitIdRef = useRef<string | null>(null);\n  const focusedElementRef = useRef<HTMLElement | null>(null);\n  const isVisualEditModeRef = useRef(false);\n  const scrollTimeoutRef = useRef<number | null>(null);\n  const originalContentRef = useRef<string>(\"\");\n  const originalSrcRef = useRef<string>(\"\"); // track original img src\n  const focusedImageElementRef = useRef<HTMLImageElement | null>(null); // track the actual img element\n  const editingElementRef = useRef<HTMLElement | null>(null);\n  const wasEditableRef = useRef<boolean>(false);\n  const styleElementRef = useRef<HTMLStyleElement | null>(null);\n  const originalStylesRef = useRef<Record<string, string>>({});\n  const appliedStylesRef = useRef<Map<string, Record<string, string>>>(\n    new Map()\n  );\n  const hasStyleChangesRef = useRef<boolean>(false);\n  const lastClickTimeRef = useRef<number>(0);\n  const pendingCleanupRef = useRef<NodeJS.Timeout | null>(null);\n\n  // Cache of loaded fonts\n  const loadedFontFamilies = useRef<Set<string>>(new Set());\n  // Map of elementId that already has a persistent font set\n  const persistentFontMap = useRef<Map<string, string>>(new Map());\n  // Timeout refs for clearing persistent font map\n  const persistentFontTimeouts = useRef<Map<string, number>>(new Map());\n\n  // Keep ref in sync with state and persist to localStorage\n  useEffect(() => {\n    isVisualEditModeRef.current = isVisualEditMode;\n    // Persist to localStorage\n    if (typeof window !== \"undefined\") {\n      localStorage.setItem(VISUAL_EDIT_MODE_KEY, String(isVisualEditMode));\n    }\n  }, [isVisualEditMode]);\n\n  // On mount, notify parent if visual edit mode was restored from localStorage\n  useEffect(() => {\n    if (isVisualEditMode) {\n      // Send acknowledgement to parent that visual edit mode is active\n      // This will sync the parent's state with our restored state\n      window.parent.postMessage(\n        { type: CHANNEL, msg: \"VISUAL_EDIT_MODE_ACK\", active: true },\n        \"*\"\n      );\n\n      // Also send a special message to indicate this was restored from localStorage\n      window.parent.postMessage(\n        { type: CHANNEL, msg: \"VISUAL_EDIT_MODE_RESTORED\", active: true },\n        \"*\"\n      );\n\n      // Restore focused element after a short delay to ensure DOM is ready\n      setTimeout(() => {\n        if (typeof window !== \"undefined\") {\n          // Restore focused element\n          const focusedData = localStorage.getItem(FOCUSED_ELEMENT_KEY);\n          if (focusedData) {\n            try {\n              const { id } = JSON.parse(focusedData);\n              const element = document.querySelector(\n                `[data-orchids-id=\"${id}\"]`\n              ) as HTMLElement;\n\n              if (element) {\n                // Simulate a click on the element to restore focus\n                const rect = element.getBoundingClientRect();\n                const clickEvent = new MouseEvent(\"click\", {\n                  clientX: rect.left + rect.width / 2,\n                  clientY: rect.top + rect.height / 2,\n                  bubbles: true,\n                  cancelable: true,\n                });\n                element.dispatchEvent(clickEvent);\n              }\n            } catch {\n              // Ignore parsing errors\n            }\n          }\n        }\n      }, 500); // Wait 500ms for DOM to be fully ready\n    }\n  }, []); // Run only on mount\n\n  // Helper function to expand box dimensions\n  const expandBox = (rect: DOMRect): Box => ({\n    top: rect.top - BOX_PADDING,\n    left: rect.left - BOX_PADDING,\n    width: rect.width + BOX_PADDING * 2,\n    height: rect.height + BOX_PADDING * 2,\n  });\n\n  // Helper to update focus box position\n  const updateFocusBox = () => {\n    if (focusedElementRef.current) {\n      const r = focusedElementRef.current.getBoundingClientRect();\n      setFocusBox(expandBox(r));\n    }\n  };\n\n  // Add global styles for contentEditable elements\n  useEffect(() => {\n    if (isVisualEditMode && !styleElementRef.current) {\n      const style = document.createElement(\"style\");\n      style.textContent = `\n        [contenteditable=\"true\"]:focus {\n          outline: none !important;\n          box-shadow: none !important;\n          border-color: inherit !important;\n        }\n        [contenteditable=\"true\"] {\n          cursor: text !important;\n        }\n        /* Prevent the default blue highlight on contenteditable */\n        [contenteditable=\"true\"]::selection {\n          background-color: rgba(59, 130, 246, 0.3);\n        }\n        [contenteditable=\"true\"]::-moz-selection {\n          background-color: rgba(59, 130, 246, 0.3);\n        }\n        /* Prevent child elements from being editable */\n        [contenteditable=\"true\"] [contenteditable=\"false\"] {\n          user-select: none !important;\n          -webkit-user-select: none !important;\n          -moz-user-select: none !important;\n          -ms-user-select: none !important;\n          opacity: 0.7 !important;\n          cursor: default !important;\n        }\n        /* Ensure protected elements can't be selected */\n        [data-orchids-protected=\"true\"] {\n          user-select: none !important;\n          -webkit-user-select: none !important;\n          -moz-user-select: none !important;\n          -ms-user-select: none !important;\n        }\n        /* Visual edit overlay styles */\n        .orchids-hover-box {\n          position: fixed;\n          pointer-events: none;\n          border: 0.5px dashed #38bdf8;\n          background-color: rgba(191, 219, 254, 0.2);\n          border-radius: 0.125rem;\n        }\n        .orchids-hover-tag {\n          position: fixed;\n          pointer-events: none;\n          font-size: 10px;\n          color: white;\n          background-color: #38bdf8;\n          padding: 0.125rem 0.25rem;\n          border-radius: 0.125rem;\n        }\n        .orchids-focus-tag {\n          position: fixed;\n          font-size: 10px;\n          font-weight: 600;\n          color: white;\n          background-color: #3b82f6;\n          padding: 0 0.25rem;\n          border-radius: 0.125rem;\n          pointer-events: none;\n          user-select: none;\n        }\n        .orchids-focus-box {\n          position: fixed;\n          pointer-events: none;\n          border: 1.5px solid #38bdf8;\n          border-radius: 0.125rem;\n        }\n        .orchids-resize-handle {\n          position: fixed;\n          width: 0.5rem;\n          height: 0.5rem;\n          background-color: #38bdf8;\n          border-radius: 50%;\n          pointer-events: auto;\n        }\n        .orchids-resize-handle-nw {\n          cursor: nw-resize;\n        }\n        .orchids-resize-handle-ne {\n          cursor: ne-resize;\n        }\n        .orchids-resize-handle-sw {\n          cursor: sw-resize;\n        }\n        .orchids-resize-handle-se {\n          cursor: se-resize;\n        }\n        .orchids-resize-handle-n {\n          cursor: n-resize;\n        }\n        .orchids-resize-handle-s {\n          cursor: s-resize;\n        }\n        .orchids-resize-handle-w {\n          cursor: w-resize;\n        }\n        .orchids-resize-handle-e {\n          cursor: e-resize;\n        }\n      `;\n      document.head.appendChild(style);\n      styleElementRef.current = style;\n    } else if (!isVisualEditMode && styleElementRef.current) {\n      styleElementRef.current.remove();\n      styleElementRef.current = null;\n    }\n\n    return () => {\n      if (styleElementRef.current) {\n        styleElementRef.current.remove();\n        styleElementRef.current = null;\n      }\n    };\n  }, [isVisualEditMode]);\n\n  // Helper to make only text nodes editable and protect child elements\n  const protectChildElements = (element: HTMLElement) => {\n    // Make all child elements non-editable\n    const childElements = element.querySelectorAll(\"*\");\n    childElements.forEach((child) => {\n      const childEl = child as HTMLElement;\n      childEl.contentEditable = \"false\";\n      // Add a data attribute to mark protected elements\n      childEl.setAttribute(\"data-orchids-protected\", \"true\");\n      // Only prevent text selection within the child elements when parent is being edited\n      // But still allow pointer events for hovering and clicking\n      childEl.style.userSelect = \"none\";\n      childEl.style.webkitUserSelect = \"none\";\n      // Don't set pointerEvents to none - we want to allow hover and click\n    });\n  };\n\n  // Helper to restore child elements after editing\n  const restoreChildElements = (element: HTMLElement) => {\n    const protectedElements = element.querySelectorAll(\n      '[data-orchids-protected=\"true\"]'\n    );\n    protectedElements.forEach((child) => {\n      const childEl = child as HTMLElement;\n      childEl.removeAttribute(\"contenteditable\");\n      childEl.removeAttribute(\"data-orchids-protected\");\n      // Restore original styles\n      childEl.style.userSelect = \"\";\n      childEl.style.webkitUserSelect = \"\";\n    });\n  };\n\n  // Handle text changes and send to parent\n  const handleTextChange = (element: HTMLElement) => {\n    // Double-check this is still the editing element to avoid stale closures\n    if (element !== editingElementRef.current) {\n      console.warn(\"Attempting to handle text change for non-editing element\");\n      return;\n    }\n\n    // Get the orchids ID from the element to ensure we're working with the right one\n    const orchidsId = element.getAttribute(\"data-orchids-id\");\n    if (!orchidsId) return;\n\n    // For elements with children, only extract direct text content\n    let newText: string;\n    let oldText: string;\n\n    if (element.childElementCount > 0) {\n      // Element has children - only track direct text nodes\n      newText = extractDirectTextContent(element);\n      // We need to compare against the original direct text content\n      // Since originalContentRef stores the full text, we need to handle this differently\n      oldText = originalContentRef.current;\n    } else {\n      // No children - use innerText to preserve line breaks\n      newText = element.innerText || element.textContent || \"\";\n      oldText = originalContentRef.current;\n    }\n\n    if (newText !== oldText) {\n      const parsed = parseOrchidsId(orchidsId);\n      if (!parsed) return;\n\n      // Send text change message to parent\n      const msg: ChildToParent = {\n        type: CHANNEL,\n        msg: \"TEXT_CHANGED\",\n        id: orchidsId,\n        oldText: wrapMultiline(oldText),\n        newText: wrapMultiline(newText),\n        filePath: parsed.filePath,\n        line: parsed.line,\n        column: parsed.column,\n      };\n\n      postMessageDedup(msg);\n\n      // Update the original content reference\n      originalContentRef.current = newText;\n    }\n  };\n\n  // Handle style changes and send to parent\n  const handleStyleChange = (\n    element: HTMLElement,\n    styles: Record<string, string>\n  ) => {\n    const orchidsId = element.getAttribute(\"data-orchids-id\");\n    if (!orchidsId) return;\n\n    const parsed = parseOrchidsId(orchidsId);\n    if (!parsed) return;\n\n    // Find ALL elements with the same orchids ID\n    const allMatchingElements = document.querySelectorAll(\n      `[data-orchids-id=\"${orchidsId}\"]`\n    ) as NodeListOf<HTMLElement>;\n\n    // Apply styles to ALL matching elements for visual feedback\n    allMatchingElements.forEach((el) => {\n      Object.entries(styles).forEach(([property, value]) => {\n        // Convert camelCase to kebab-case for CSS property names\n        const cssProp = property.replace(/([A-Z])/g, \"-$1\").toLowerCase();\n\n        // Handle special cases for default values\n        let finalValue = value;\n\n        // If backgroundColor is being set to transparent, use transparent keyword\n        if (\n          property === \"backgroundColor\" &&\n          (value === \"transparent\" ||\n            value === \"rgba(0, 0, 0, 0)\" ||\n            value === \"rgb(0, 0, 0, 0)\")\n        ) {\n          finalValue = \"transparent\";\n        }\n\n        // If removing styles (setting to default), remove the property\n        if (\n          (property === \"backgroundColor\" && finalValue === \"transparent\") ||\n          (property === \"backgroundImage\" && value === \"none\") ||\n          (property === \"textDecoration\" && value === \"none\") ||\n          (property === \"fontStyle\" && value === \"normal\") ||\n          (property === \"opacity\" && value === \"1\") ||\n          ((property.includes(\"padding\") || property.includes(\"margin\")) &&\n            value === \"0\") ||\n          (property === \"borderRadius\" && value === \"0\") ||\n          (property === \"letterSpacing\" && value === \"normal\") ||\n          (property === \"gap\" && value === \"normal\")\n        ) {\n          // Remove the property to let the stylesheet value show through\n          el.style.removeProperty(cssProp);\n        } else {\n          // Apply with !important so it overrides existing rules\n          el.style.setProperty(cssProp, finalValue, \"important\");\n        }\n      });\n    });\n\n    // Store the applied styles\n    const existingStyles = appliedStylesRef.current.get(orchidsId) || {};\n    appliedStylesRef.current.set(orchidsId, { ...existingStyles, ...styles });\n    hasStyleChangesRef.current = true;\n\n    // Update the focus box after style change\n    requestAnimationFrame(() => {\n      updateFocusBox();\n    });\n\n    // Don't send to parent yet - wait for blur\n  };\n\n  // Send style changes on blur\n  const handleStyleBlur = (element: HTMLElement) => {\n    if (!hasStyleChangesRef.current) return;\n\n    const orchidsId = element.getAttribute(\"data-orchids-id\");\n    if (!orchidsId) return;\n\n    const parsed = parseOrchidsId(orchidsId);\n    if (!parsed) return;\n\n    const appliedStyles = appliedStylesRef.current.get(orchidsId);\n    if (!appliedStyles || Object.keys(appliedStyles).length === 0) return;\n\n    // Get className for breakpoint detection\n    const className = element.getAttribute(\"class\") || \"\";\n\n    // Send style blur message to parent for Tailwind conversion\n    const msg: ChildToParent = {\n      type: CHANNEL,\n      msg: \"STYLE_BLUR\",\n      id: orchidsId,\n      styles: appliedStyles,\n      className,\n      filePath: parsed.filePath,\n      line: parsed.line,\n      column: parsed.column,\n    };\n\n    postMessageDedup(msg);\n\n    // Reset style changes flag\n    hasStyleChangesRef.current = false;\n  };\n\n  // Flush image src updates on blur/focus change\n  const flushImageSrcChange = () => {\n    // Use the stored image element reference if available\n    const imgElement = focusedImageElementRef.current;\n    if (!imgElement) return;\n\n    const orchidsId = imgElement.getAttribute(\"data-orchids-id\");\n    if (!orchidsId) return;\n\n    const parsed = parseOrchidsId(orchidsId);\n    if (!parsed) return;\n\n    const newSrc = normalizeImageSrc(imgElement.src);\n    const oldSrc = normalizeImageSrc(originalSrcRef.current);\n\n    if (!newSrc || newSrc === oldSrc) return; // nothing changed\n\n    const msg: ChildToParent = {\n      type: CHANNEL,\n      msg: \"IMAGE_BLUR\",\n      id: orchidsId,\n      oldSrc,\n      newSrc,\n      filePath: parsed.filePath,\n      line: parsed.line,\n      column: parsed.column,\n    };\n\n    postMessageDedup(msg);\n\n    originalSrcRef.current = newSrc; // reset baseline\n    focusedImageElementRef.current = null; // clear reference\n  };\n\n  // Listen for style and image updates from parent\n  useEffect(() => {\n    function handleMessage(e: MessageEvent) {\n      if (e.data?.type === \"ORCHIDS_STYLE_UPDATE\") {\n        const { elementId, styles } = e.data;\n\n        // Find ALL elements with the same orchids ID\n        const allMatchingElements = document.querySelectorAll(\n          `[data-orchids-id=\"${elementId}\"]`\n        ) as NodeListOf<HTMLElement>;\n\n        if (allMatchingElements.length > 0) {\n          // If fontFamily is present ensure stylesheet loaded first\n          const fam = styles.fontFamily || styles[\"fontFamily\"];\n          if (fam) {\n            const familyKey = fam.replace(/['\\s]+/g, \"+\");\n            if (!loadedFontFamilies.current.has(familyKey)) {\n              const link = document.createElement(\"link\");\n              link.rel = \"stylesheet\";\n              link.href = `https://fonts.googleapis.com/css2?family=${familyKey}:wght@400&display=swap`;\n              document.head.appendChild(link);\n              loadedFontFamilies.current.add(familyKey);\n            }\n          }\n\n          // If fontFamily made persistent via style update, remember so previews don't override\n          if (fam) {\n            persistentFontMap.current.set(elementId, fam);\n\n            // Clear any existing timeout\n            const existingTimeout =\n              persistentFontTimeouts.current.get(elementId);\n            if (existingTimeout) {\n              clearTimeout(existingTimeout);\n            }\n\n            // Set timeout to clear persistent font after 2 seconds, allowing previews again\n            const timeoutId = window.setTimeout(() => {\n              persistentFontMap.current.delete(elementId);\n              persistentFontTimeouts.current.delete(elementId);\n            }, 2000);\n\n            persistentFontTimeouts.current.set(elementId, timeoutId);\n          }\n\n          // Apply styles to ALL matching elements\n          allMatchingElements.forEach((element) => {\n            // Only update handleStyleChange for the focused element to track changes\n            if (focusedElementRef.current === element) {\n              handleStyleChange(element, styles);\n            } else {\n              // For other elements, apply styles directly\n              Object.entries(styles).forEach(([property, value]) => {\n                const cssProp = property\n                  .replace(/([A-Z])/g, \"-$1\")\n                  .toLowerCase();\n\n                // Handle special cases for default values\n                let finalValue = String(value);\n\n                // If backgroundColor is being set to transparent, use transparent keyword\n                if (\n                  property === \"backgroundColor\" &&\n                  (value === \"transparent\" ||\n                    value === \"rgba(0, 0, 0, 0)\" ||\n                    value === \"rgb(0, 0, 0, 0)\")\n                ) {\n                  finalValue = \"transparent\";\n                }\n\n                // If removing styles (setting to default), remove the property\n                if (\n                  (property === \"backgroundColor\" &&\n                    finalValue === \"transparent\") ||\n                  (property === \"backgroundImage\" && value === \"none\") ||\n                  (property === \"textDecoration\" && value === \"none\") ||\n                  (property === \"fontStyle\" && value === \"normal\") ||\n                  (property === \"opacity\" && value === \"1\") ||\n                  ((property.includes(\"padding\") ||\n                    property.includes(\"margin\")) &&\n                    value === \"0\") ||\n                  (property === \"borderRadius\" && value === \"0\") ||\n                  (property === \"letterSpacing\" && value === \"normal\") ||\n                  (property === \"gap\" && value === \"normal\")\n                ) {\n                  // Remove the property to let the stylesheet value show through\n                  element.style.removeProperty(cssProp);\n                } else {\n                  element.style.setProperty(cssProp, finalValue, \"important\");\n                }\n              });\n            }\n          });\n        }\n      } else if (e.data?.type === \"ORCHIDS_IMAGE_UPDATE\") {\n        const { elementId, src, oldSrc } = e.data;\n        let element: HTMLImageElement | null = null;\n        const candidates = document.querySelectorAll(\n          `[data-orchids-id=\"${elementId}\"]`\n        );\n        candidates.forEach((el) => {\n          if (el.tagName.toLowerCase() === \"img\") {\n            const img = el as HTMLImageElement;\n            const norm = normalizeImageSrc(img.src);\n            if (!element) element = img; // first fallback\n            if (oldSrc && normalizeImageSrc(oldSrc) === norm) {\n              element = img;\n            }\n          }\n        });\n\n        if (!element) return;\n\n        if ((element as HTMLElement).tagName.toLowerCase() === \"img\") {\n          const imgEl = element as HTMLImageElement;\n\n          {\n            /*\n             * Clear any existing responsive sources so the newly uploaded image\n             * always displays.  Some frameworks (e.g. Next.js) add a `srcset`\n             * attribute which can override `src` in certain viewport/device\n             * scenarios, so we strip it out before setting the new source.\n             */\n            imgEl.removeAttribute(\"srcset\");\n            imgEl.srcset = \"\";\n\n            imgEl.src = src;\n\n            // Update baseline src so flush doesn't treat this as pending change\n            originalSrcRef.current = normalizeImageSrc(src);\n            focusedImageElementRef.current = imgEl;\n\n            imgEl.onload = () => updateFocusBox();\n          }\n        }\n      } else if (e.data?.type === \"RESIZE_ELEMENT\") {\n        const { elementId, width, height } = e.data;\n        const element = document.querySelector(\n          `[data-orchids-id=\"${elementId}\"]`\n        ) as HTMLElement;\n\n        if (element && focusedElementRef.current === element) {\n          // Apply temporary resize styles\n          element.style.setProperty(\"width\", `${width}px`, \"important\");\n          element.style.setProperty(\"height\", `${height}px`, \"important\");\n\n          // Update focus box\n          updateFocusBox();\n        }\n      }\n    }\n\n    window.addEventListener(\"message\", handleMessage);\n    return () => window.removeEventListener(\"message\", handleMessage);\n  }, []);\n\n  // Handle resize\n  const handleResizeStart = (e: React.MouseEvent, handle: string) => {\n    if (!focusedElementRef.current) return;\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    const rect = focusedElementRef.current.getBoundingClientRect();\n\n    // Clear any hover overlay when starting resize\n    setHoverBox(null);\n    lastHitElementRef.current = null;\n\n    // Disable pointer events on body to prevent hover detection\n    document.body.style.pointerEvents = \"none\";\n    // Keep resize handles interactive\n    const resizeHandles = document.querySelectorAll(\".resize-handle\");\n    resizeHandles.forEach((handle) => {\n      (handle as HTMLElement).style.pointerEvents = \"auto\";\n    });\n\n    setIsResizing(true);\n    isResizingRef.current = true;\n    setResizeHandle(handle);\n    setResizeStart({\n      x: e.clientX,\n      y: e.clientY,\n      width: rect.width,\n      height: rect.height,\n    });\n  };\n\n  // Handle resize move\n  useEffect(() => {\n    if (\n      !isResizing ||\n      !resizeStart ||\n      !resizeHandle ||\n      !focusedElementRef.current\n    )\n      return;\n\n    const handleMouseMove = (e: MouseEvent) => {\n      const dx = e.clientX - resizeStart.x;\n      const dy = e.clientY - resizeStart.y;\n\n      let newWidth = resizeStart.width;\n      let newHeight = resizeStart.height;\n\n      // Calculate new dimensions based on handle\n      if (resizeHandle.includes(\"e\")) newWidth = resizeStart.width + dx;\n      if (resizeHandle.includes(\"w\")) newWidth = resizeStart.width - dx;\n      if (resizeHandle.includes(\"s\")) newHeight = resizeStart.height + dy;\n      if (resizeHandle.includes(\"n\")) newHeight = resizeStart.height - dy;\n\n      // Get parent container for constraints\n      const parent = focusedElementRef.current?.parentElement;\n      if (parent) {\n        const parentRect = parent.getBoundingClientRect();\n        const parentStyles = window.getComputedStyle(parent);\n        const parentPaddingLeft = parseFloat(parentStyles.paddingLeft) || 0;\n        const parentPaddingRight = parseFloat(parentStyles.paddingRight) || 0;\n        const parentPaddingTop = parseFloat(parentStyles.paddingTop) || 0;\n        const parentPaddingBottom = parseFloat(parentStyles.paddingBottom) || 0;\n\n        const maxWidth =\n          parentRect.width - parentPaddingLeft - parentPaddingRight;\n        const maxHeight =\n          parentRect.height - parentPaddingTop - parentPaddingBottom;\n\n        /*\n         * Soft-clamp strategy: we respect the parent’s max size until the\n         * user’s cursor actually travels beyond that limit.  As soon as the\n         * drag distance would produce a dimension larger than the container\n         * can accommodate we stop clamping and let the element follow the\n         * cursor, effectively allowing it to “spill” out of its parent.\n         */\n        const exceedsWidth = newWidth > maxWidth;\n        const exceedsHeight = newHeight > maxHeight;\n\n        newWidth = Math.max(\n          20,\n          exceedsWidth ? newWidth : Math.min(newWidth, maxWidth)\n        );\n\n        newHeight = Math.max(\n          20,\n          exceedsHeight ? newHeight : Math.min(newHeight, maxHeight)\n        );\n      } else {\n        // Fallback to minimum dimensions if no parent\n        newWidth = Math.max(20, newWidth);\n        newHeight = Math.max(20, newHeight);\n      }\n\n      // Ensure hover box stays hidden during resize\n      if (hoverBox) {\n        setHoverBox(null);\n      }\n\n      // Send resize message to parent\n      if (focusedElementId) {\n        window.parent.postMessage(\n          {\n            type: CHANNEL,\n            msg: \"RESIZE_ELEMENT\",\n            elementId: focusedElementId,\n            width: Math.round(newWidth),\n            height: Math.round(newHeight),\n          },\n          \"*\"\n        );\n      }\n    };\n\n    const handleMouseUp = () => {\n      if (focusedElementRef.current && focusedElementId) {\n        const element = focusedElementRef.current;\n        const computedStyle = window.getComputedStyle(element);\n        const width = parseFloat(computedStyle.width) || element.offsetWidth;\n        const height = parseFloat(computedStyle.height) || element.offsetHeight;\n\n        // Check if element has max-width/max-height constraints\n        const maxWidth = computedStyle.maxWidth;\n        const maxHeight = computedStyle.maxHeight;\n        const hasMaxWidth =\n          maxWidth && maxWidth !== \"none\" && maxWidth !== \"initial\";\n        const hasMaxHeight =\n          maxHeight && maxHeight !== \"none\" && maxHeight !== \"initial\";\n\n        // Try to use relative units when possible\n        const parent = element.parentElement;\n        let widthValue = `${Math.round(width)}px`;\n        let heightValue = `${Math.round(height)}px`;\n\n        if (parent) {\n          const parentRect = parent.getBoundingClientRect();\n          const parentStyles = window.getComputedStyle(parent);\n          const parentPaddingLeft = parseFloat(parentStyles.paddingLeft) || 0;\n          const parentPaddingRight = parseFloat(parentStyles.paddingRight) || 0;\n          const parentPaddingTop = parseFloat(parentStyles.paddingTop) || 0;\n          const parentPaddingBottom =\n            parseFloat(parentStyles.paddingBottom) || 0;\n\n          const parentInnerWidth =\n            parentRect.width - parentPaddingLeft - parentPaddingRight;\n          const parentInnerHeight =\n            parentRect.height - parentPaddingTop - parentPaddingBottom;\n\n          // If the element takes up a significant portion of parent, use percentage\n          const widthPercent = (width / parentInnerWidth) * 100;\n          const heightPercent = (height / parentInnerHeight) * 100;\n\n          // Use percentage if it's a round number or close to common values\n          if (\n            Math.abs(widthPercent - Math.round(widthPercent)) < 0.1 ||\n            [25, 33.333, 50, 66.667, 75, 100].some(\n              (v) => Math.abs(widthPercent - v) < 0.5\n            )\n          ) {\n            widthValue = `${Math.round(widthPercent * 10) / 10}%`;\n          }\n\n          // For height, be more conservative with percentages (often px is preferred)\n          if (\n            Math.abs(heightPercent - Math.round(heightPercent)) < 0.1 &&\n            [25, 50, 75, 100].includes(Math.round(heightPercent))\n          ) {\n            heightValue = `${Math.round(heightPercent)}%`;\n          }\n        }\n\n        // Build styles object\n        const styles: Record<string, string> = {};\n\n        // Always set a fixed width and height to break out of responsive classes.\n        styles.width = widthValue;\n        styles.height = heightValue;\n\n        // If the element had a max-width constraint (e.g. from `max-w-full`),\n        // we update it to the new width to ensure the resize is not capped.\n        if (hasMaxWidth) {\n          styles.maxWidth = widthValue;\n        }\n\n        // Same for height.\n        if (hasMaxHeight) {\n          styles.maxHeight = heightValue;\n        }\n\n        // Send final dimensions as style change\n        const msg: ChildToParent = {\n          type: CHANNEL,\n          msg: \"STYLE_BLUR\",\n          id: focusedElementId,\n          styles,\n          filePath: \"\",\n          line: 0,\n          column: 0,\n          className: element.getAttribute(\"class\") || \"\",\n        };\n\n        // Extract file info from data-orchids-id\n        const orchidsId = element.getAttribute(\"data-orchids-id\");\n        if (orchidsId) {\n          const parsed = parseOrchidsId(orchidsId);\n          if (parsed) {\n            msg.filePath = parsed.filePath;\n            msg.line = parsed.line;\n            msg.column = parsed.column;\n          }\n        }\n\n        window.parent.postMessage(msg, \"*\");\n      }\n\n      setIsResizing(false);\n      isResizingRef.current = false;\n      setResizeHandle(null);\n      setResizeStart(null);\n\n      // Re-enable pointer events\n      document.body.style.pointerEvents = \"\";\n\n      // Clear the last hit element to force re-detection after resize\n      lastHitElementRef.current = null;\n    };\n\n    document.addEventListener(\"mousemove\", handleMouseMove);\n    document.addEventListener(\"mouseup\", handleMouseUp);\n\n    return () => {\n      document.removeEventListener(\"mousemove\", handleMouseMove);\n      document.removeEventListener(\"mouseup\", handleMouseUp);\n    };\n  }, [isResizing, resizeStart, resizeHandle, focusedElementId, hoverBox]); // Added focusedElementId and hoverBox as dependencies\n\n  // Cleanup function to restore element state\n  const cleanupEditingElement = () => {\n    if (editingElementRef.current) {\n      const element = editingElementRef.current;\n\n      // Immediately clear the ref to prevent any further operations\n      editingElementRef.current = null;\n\n      // Flush pending style edits first for the same reason described above\n      handleStyleBlur(element);\n\n      // Now process text changes\n      handleTextChange(element);\n\n      // Restore child elements if they were protected\n      if (element.childElementCount > 0) {\n        restoreChildElements(element);\n      }\n\n      // Only set contentEditable to false if we made it true\n      if (!wasEditableRef.current) {\n        element.contentEditable = \"false\";\n      }\n\n      // Don't restore original styles - keep the applied styles\n      // Remove the outline suppression styles only\n      const currentStyle = element.getAttribute(\"style\") || \"\";\n      const cleanedStyle = currentStyle\n        .replace(/outline:\\s*none\\s*!important;?/gi, \"\")\n        .replace(/box-shadow:\\s*none\\s*!important;?/gi, \"\")\n        .trim()\n        .replace(/;\\s*;/g, \";\")\n        .replace(/^;|;$/g, \"\");\n\n      if (cleanedStyle) {\n        element.setAttribute(\"style\", cleanedStyle);\n      } else {\n        element.removeAttribute(\"style\");\n      }\n\n      element.blur();\n\n      // Remove event handlers\n      const handlers = (element as any)._editHandlers;\n      if (handlers) {\n        element.removeEventListener(\"focus\", handlers.focus);\n        element.removeEventListener(\"blur\", handlers.blur);\n        element.removeEventListener(\"input\", handlers.input);\n        delete (element as any)._editHandlers;\n      }\n\n      wasEditableRef.current = false;\n      // Clear the original content reference\n      originalContentRef.current = \"\";\n    }\n  };\n\n  // Prevent all navigation in visual edit mode\n  useEffect(() => {\n    if (!isVisualEditMode) return;\n\n    // Prevent link clicks\n    const preventLinkClick = (e: Event) => {\n      const target = e.target as HTMLElement;\n      const link = target.closest(\"a\");\n      if (link && !link.isContentEditable) {\n        e.preventDefault();\n        e.stopPropagation();\n      }\n    };\n\n    // Prevent form submissions\n    const preventFormSubmit = (e: Event) => {\n      e.preventDefault();\n      e.stopPropagation();\n    };\n\n    // Add listeners in capture phase to catch events early\n    document.addEventListener(\"click\", preventLinkClick, true);\n    document.addEventListener(\"submit\", preventFormSubmit, true);\n\n    return () => {\n      document.removeEventListener(\"click\", preventLinkClick, true);\n      document.removeEventListener(\"submit\", preventFormSubmit, true);\n    };\n  }, [isVisualEditMode]);\n\n  // Clean up when exiting visual edit mode\n  useEffect(() => {\n    if (!isVisualEditMode) {\n      cleanupEditingElement();\n      // Clear applied styles tracking\n      appliedStylesRef.current.clear();\n      hasStyleChangesRef.current = false;\n\n      // Clear image element reference\n      focusedImageElementRef.current = null;\n    }\n  }, [isVisualEditMode]);\n\n  // Update focus box position when scrolling or resizing\n  useEffect(() => {\n    if (focusedElementRef.current) {\n      const handleUpdate = () => {\n        updateFocusBox();\n\n        if (focusedElementRef.current && focusedElementId) {\n          const fr = focusedElementRef.current.getBoundingClientRect();\n          const fBox = expandBox(fr);\n          if (fBox) {\n            const focMsg: ChildToParent = {\n              type: CHANNEL,\n              msg: \"FOCUS_MOVED\",\n              id: focusedElementId,\n              rect: {\n                top: fBox.top,\n                left: fBox.left,\n                width: fBox.width,\n                height: fBox.height,\n              },\n            };\n            postMessageDedup(focMsg);\n          }\n        }\n      };\n\n      window.addEventListener(\"scroll\", handleUpdate, true);\n      window.addEventListener(\"resize\", handleUpdate);\n\n      // Also observe the focused element for size changes\n      const resizeObserver = new ResizeObserver(handleUpdate);\n      resizeObserver.observe(focusedElementRef.current);\n\n      return () => {\n        window.removeEventListener(\"scroll\", handleUpdate, true);\n        window.removeEventListener(\"resize\", handleUpdate);\n        resizeObserver.disconnect();\n      };\n    }\n  }, [focusedElementId]);\n\n  useEffect(() => {\n    // Handle pointer movement directly in the iframe\n    function onPointerMove(e: PointerEvent) {\n      if (isResizingRef.current) {\n        return;\n      }\n      // Only track pointer when visual edit mode is active\n      if (!isVisualEditModeRef.current) return;\n\n      // Don't show hover boxes while scrolling\n      if (isScrolling) return;\n\n      // Hit-testing at pointer position\n      const hit =\n        document\n          .elementFromPoint(e.clientX, e.clientY)\n          ?.closest<HTMLElement>(\"[data-orchids-id]\") ?? null;\n\n      if (hit !== lastHitElementRef.current) {\n        lastHitElementRef.current = hit;\n\n        if (!hit) {\n          setHoverBox(null);\n          setHoverBoxes([]);\n          setHoverTag(null);\n          lastHitIdRef.current = null;\n          // If we were previously focused on an image, ensure its src is flushed\n          flushImageSrcChange();\n\n          const msg: ChildToParent = {\n            type: CHANNEL,\n            msg: \"HIT\",\n            id: null,\n            tag: null,\n            rect: null,\n          };\n          postMessageDedup(msg);\n          return;\n        }\n\n        // Don't show hover box if this is the focused element\n        const hitId = hit.getAttribute(\"data-orchids-id\");\n\n        // Check if we're already showing boxes for this ID\n        if (hitId === lastHitIdRef.current) {\n          return;\n        }\n\n        lastHitIdRef.current = hitId;\n\n        const tagName =\n          hit.getAttribute(\"data-orchids-name\") || hit.tagName.toLowerCase();\n\n        // Update hover boxes immediately for instant feedback\n        // Find ALL elements with the same orchids ID\n        const allMatchingElements = document.querySelectorAll(\n          `[data-orchids-id=\"${hitId}\"]`\n        ) as NodeListOf<HTMLElement>;\n\n        // Create hover boxes for all matching elements except the focused one\n        const boxes: Box[] = [];\n        allMatchingElements.forEach((element) => {\n          // Skip if this element is the focused one\n          const elementId = element.getAttribute(\"data-orchids-id\");\n          if (elementId === focusedElementId) {\n            return;\n          }\n\n          const rect = element.getBoundingClientRect();\n          boxes.push(expandBox(rect));\n        });\n\n        // Set multiple hover boxes\n        setHoverBoxes(boxes);\n\n        // Set single hover box for the primary element (for compatibility)\n        // Only set if it's not the focused element\n        if (hitId !== focusedElementId) {\n          const r = hit.getBoundingClientRect();\n          const expandedBox = expandBox(r);\n          setHoverBox(expandedBox);\n        } else {\n          setHoverBox(null);\n        }\n\n        setHoverTag(tagName);\n\n        const msg: ChildToParent = {\n          type: CHANNEL,\n          msg: \"HIT\",\n          id: hitId,\n          tag: tagName,\n          rect:\n            hitId !== focusedElementId\n              ? expandBox(hit.getBoundingClientRect())\n              : null,\n        };\n        postMessageDedup(msg);\n      }\n    }\n\n    // Handle pointer leaving the document\n    function onPointerLeave() {\n      if (!isVisualEditModeRef.current) return;\n\n      if (isResizingRef.current) return;\n\n      setHoverBox(null);\n      setHoverBoxes([]);\n      setHoverTag(null);\n\n      // Flush image src change when cursor leaves iframe altogether\n      flushImageSrcChange();\n\n      lastHitElementRef.current = null;\n      lastHitIdRef.current = null;\n      const msg: ChildToParent = {\n        type: CHANNEL,\n        msg: \"HIT\",\n        id: null,\n        tag: null,\n        rect: null,\n      };\n      postMessageDedup(msg);\n    }\n\n    // Handle mousedown to prepare element for editing\n    function onMouseDownCapture(e: MouseEvent) {\n      if (isResizingRef.current) return;\n      // Only handle if visual edit mode is active\n      if (!isVisualEditModeRef.current) return;\n\n      const hit = (e.target as HTMLElement)?.closest<HTMLElement>(\n        \"[data-orchids-id]\"\n      );\n\n      if (hit && isTextEditable(hit)) {\n        // Store whether it was already editable\n        wasEditableRef.current = hit.contentEditable === \"true\";\n\n        // Make element editable BEFORE the click goes through\n        if (!wasEditableRef.current) {\n          // Apply inline styles to remove focus ring\n          const currentStyle = hit.getAttribute(\"style\") || \"\";\n          hit.setAttribute(\n            \"style\",\n            `${currentStyle}; outline: none !important; box-shadow: none !important;`\n          );\n\n          hit.contentEditable = \"true\";\n\n          // If the element has children, protect them from being edited\n          if (hit.childElementCount > 0) {\n            protectChildElements(hit);\n          }\n        }\n      }\n    }\n\n    // Handle clicks to focus elements\n    function onClickCapture(e: MouseEvent) {\n      if (isResizingRef.current) return;\n      // Only handle if visual edit mode is active\n      if (!isVisualEditModeRef.current) return;\n\n      // Debounce rapid clicks\n      const now = Date.now();\n      if (now - lastClickTimeRef.current < 100) {\n        return; // Ignore clicks within 100ms of each other\n      }\n      lastClickTimeRef.current = now;\n\n      const target = e.target as HTMLElement;\n      const hit = target.closest<HTMLElement>(\"[data-orchids-id]\");\n\n      if (hit) {\n        const tagName =\n          hit.getAttribute(\"data-orchids-name\") || hit.tagName.toLowerCase();\n\n        const hitId = hit.getAttribute(\"data-orchids-id\");\n        const isEditable = isTextEditable(hit);\n\n        // Always prevent default for non-text interactions\n        const isLink = hit.tagName.toLowerCase() === \"a\" || !!hit.closest(\"a\");\n        const isButton =\n          hit.tagName.toLowerCase() === \"button\" ||\n          hit.getAttribute(\"role\") === \"button\";\n\n        // Prevent navigation and button actions\n        if (isLink || isButton || !isEditable) {\n          e.preventDefault();\n          e.stopPropagation();\n        }\n\n        // Capture previously focused element before updating\n        const prevFocused = focusedElementRef.current;\n\n        // Update focused element\n        focusedElementRef.current = hit;\n        setFocusedElementId(hitId);\n        setFocusTag(tagName);\n\n        // Save focused element info to localStorage\n        if (hitId && typeof window !== \"undefined\") {\n          const focusedElementData = {\n            id: hitId,\n            tag: tagName,\n          };\n          localStorage.setItem(\n            FOCUSED_ELEMENT_KEY,\n            JSON.stringify(focusedElementData)\n          );\n        }\n\n        // Find ALL other elements with the same orchids ID and show hover boxes\n        const allMatchingElements = document.querySelectorAll(\n          `[data-orchids-id=\"${hitId}\"]`\n        ) as NodeListOf<HTMLElement>;\n\n        // Create hover boxes for all matching elements except the focused one\n        const boxes: Box[] = [];\n        allMatchingElements.forEach((element) => {\n          // Skip the focused element itself\n          if (element === hit) {\n            return;\n          }\n\n          const rect = element.getBoundingClientRect();\n          boxes.push(expandBox(rect));\n        });\n\n        // Set hover boxes for other matching elements\n        setHoverBoxes(boxes);\n        // Set the hover tag to show on other elements\n        if (boxes.length > 0) {\n          setHoverTag(tagName);\n        }\n\n        // Track image element specifically\n        if (hit.tagName.toLowerCase() === \"img\") {\n          focusedImageElementRef.current = hit as HTMLImageElement;\n        } else {\n          focusedImageElementRef.current = null;\n        }\n\n        // Store original styles for the focused element\n        originalStylesRef.current = getCurrentStyles(hit);\n\n        // If this is an editable element, set it up\n        if (isEditable) {\n          // Cancel any pending cleanup\n          if (pendingCleanupRef.current) {\n            clearTimeout(pendingCleanupRef.current);\n            pendingCleanupRef.current = null;\n          }\n\n          // Clean up any previous editing element first\n          if (editingElementRef.current && editingElementRef.current !== hit) {\n            // Force blur on the previous element to trigger handlers\n            editingElementRef.current.blur();\n            cleanupEditingElement();\n          }\n\n          // Only set up if this is a new element\n          if (hit !== editingElementRef.current) {\n            editingElementRef.current = hit;\n            // Store original content - for elements with children, only store direct text\n            if (hit.childElementCount > 0) {\n              originalContentRef.current = extractDirectTextContent(hit);\n            } else {\n              originalContentRef.current =\n                hit.innerText || hit.textContent || \"\";\n            }\n\n            // Create handlers with current element reference\n            const createHandlers = (element: HTMLElement) => {\n              const handleFocus = () => {\n                // Double-check this is still the editing element\n                if (element !== editingElementRef.current) return;\n\n                // If the user applied inline style edits **before** entering text\n                // editing mode, make sure we commit them right away so that the\n                // subsequent text edits operate on the updated source.\n                handleStyleBlur(element);\n\n                // Update original content - for elements with children, only store direct text\n                if (element.childElementCount > 0) {\n                  originalContentRef.current =\n                    extractDirectTextContent(element);\n                } else {\n                  originalContentRef.current =\n                    element.innerText || element.textContent || \"\";\n                }\n\n                // Style blur above resets the flag – keep it in sync.\n                hasStyleChangesRef.current = false;\n              };\n\n              const handleBlur = () => {\n                // Double-check this is still the editing element\n                if (element !== editingElementRef.current) return;\n\n                // Flush style changes *before* text changes so that the style\n                // update is committed with the original line/column offsets.\n                // A subsequent text update may shift the source code which would\n                // otherwise cause the later style edit to fail.\n                handleStyleBlur(element);\n                handleTextChange(element);\n              };\n\n              const handleInput = () => {\n                // Double-check this is still the editing element\n                if (element !== editingElementRef.current) return;\n                // Optionally handle real-time updates\n                // handleTextChange(element);\n              };\n\n              return { handleFocus, handleBlur, handleInput };\n            };\n\n            const handlers = createHandlers(hit);\n            hit.addEventListener(\"focus\", handlers.handleFocus);\n            hit.addEventListener(\"blur\", handlers.handleBlur);\n            hit.addEventListener(\"input\", handlers.handleInput);\n\n            // Store handlers for cleanup\n            (hit as any)._editHandlers = {\n              focus: handlers.handleFocus,\n              blur: handlers.handleBlur,\n              input: handlers.handleInput,\n            };\n          }\n        }\n\n        // Update focus box with expanded dimensions\n        const r = hit.getBoundingClientRect();\n        const expandedBox = expandBox(r);\n        setFocusBox(expandedBox);\n\n        // Clear hover box since we're focusing\n        setHoverBox(null);\n\n        // Get className for Tailwind extraction\n        const className = hit.getAttribute(\"class\") || \"\";\n\n        // Get src for images & track original\n        const srcRaw =\n          hit.tagName.toLowerCase() === \"img\"\n            ? (hit as HTMLImageElement).src\n            : undefined;\n\n        if (srcRaw) {\n          originalSrcRef.current = normalizeImageSrc(srcRaw);\n        }\n\n        // Get current styles immediately\n        const computedStyles = getCurrentStyles(hit);\n\n        // Send click event to parent with coordinates and current styles\n        const msg: ChildToParent = {\n          type: CHANNEL,\n          msg: \"ELEMENT_CLICKED\",\n          id: hitId,\n          tag: tagName,\n          rect: expandedBox\n            ? {\n                top: expandedBox.top,\n                left: expandedBox.left,\n                width: expandedBox.width,\n                height: expandedBox.height,\n              }\n            : {\n                top: 0,\n                left: 0,\n                width: 0,\n                height: 0,\n              },\n          clickPosition: {\n            x: e.clientX,\n            y: e.clientY,\n          },\n          isEditable,\n          currentStyles: computedStyles,\n          className,\n          src: srcRaw,\n        };\n\n        // Send message with all data at once\n        postMessageDedup(msg);\n\n        // Move cleanup operations to after message is sent\n        setTimeout(() => {\n          // Before changing focus, flush pending image src change\n          flushImageSrcChange();\n\n          // Flush style changes for the previously focused element (if any)\n          if (prevFocused && prevFocused !== hit) {\n            handleStyleBlur(prevFocused);\n          }\n\n          // Clean up any previous editing element (if it's different)\n          if (editingElementRef.current && editingElementRef.current !== hit) {\n            cleanupEditingElement();\n          }\n        }, 0);\n      } else {\n        // Clicked on empty space or element without data-orchids-id\n        // Clear focus and hover boxes\n        if (focusedElementRef.current) {\n          // Flush any pending changes\n          flushImageSrcChange();\n          handleStyleBlur(focusedElementRef.current);\n          cleanupEditingElement();\n\n          // Clear all focus and hover states\n          focusedElementRef.current = null;\n          setFocusedElementId(null);\n          setFocusTag(null);\n          setFocusBox(null);\n          setHoverBox(null);\n          setHoverBoxes([]);\n          setHoverTag(null);\n\n          // Clear focused element from localStorage\n          if (typeof window !== \"undefined\") {\n            localStorage.removeItem(FOCUSED_ELEMENT_KEY);\n          }\n\n          // Notify parent that focus was cleared\n          const msg: ChildToParent = {\n            type: CHANNEL,\n            msg: \"ELEMENT_CLICKED\",\n            id: null,\n            tag: null,\n            rect: {\n              top: 0,\n              left: 0,\n              width: 0,\n              height: 0,\n            },\n            clickPosition: {\n              x: e.clientX,\n              y: e.clientY,\n            },\n            isEditable: false,\n            currentStyles: {},\n            className: \"\",\n          };\n          postMessageDedup(msg);\n        }\n      }\n    }\n\n    // Handle messages from parent\n    function onMsg(e: MessageEvent<ParentToChild>) {\n      if (e.data?.type !== CHANNEL) return;\n\n      // Handle preview font request from parent\n      if (e.data.msg === \"PREVIEW_FONT\" && \"elementId\" in e.data) {\n        const { elementId, fontFamily } = e.data;\n\n        // Skip if font already persisted for this element to avoid race condition\n        if (persistentFontMap.current.has(elementId)) {\n          return;\n        }\n\n        const element = document.querySelector(\n          `[data-orchids-id=\"${elementId}\"]`\n        ) as HTMLElement | null;\n        if (!element) return;\n\n        // Ensure font stylesheet is loaded\n        const familyKey = fontFamily.replace(/\\s+/g, \"+\");\n        if (!loadedFontFamilies.current.has(familyKey)) {\n          const link = document.createElement(\"link\");\n          link.rel = \"stylesheet\";\n          link.href = `https://fonts.googleapis.com/css2?family=${familyKey}:wght@400&display=swap`;\n          document.head.appendChild(link);\n          loadedFontFamilies.current.add(familyKey);\n        }\n\n        // Apply font family to element inline for preview\n        element.style.fontFamily = `'${fontFamily}', sans-serif`;\n        return;\n      }\n\n      // Handle scroll messages from parent\n      if (e.data.msg === \"SCROLL\" && \"dx\" in e.data && \"dy\" in e.data) {\n        window.scrollBy(e.data.dx, e.data.dy);\n      }\n\n      // Handle visual edit mode state changes\n      if (e.data.msg === \"VISUAL_EDIT_MODE\" && \"active\" in e.data) {\n        const newMode = e.data.active;\n        setIsVisualEditMode(newMode);\n\n        // Clear localStorage if visual edit mode is being turned off\n        if (!newMode && typeof window !== \"undefined\") {\n          localStorage.removeItem(VISUAL_EDIT_MODE_KEY);\n          localStorage.removeItem(FOCUSED_ELEMENT_KEY);\n        }\n\n        // Send acknowledgement back to parent so it knows we received the mode change\n        window.parent.postMessage(\n          { type: CHANNEL, msg: \"VISUAL_EDIT_MODE_ACK\", active: newMode },\n          \"*\"\n        );\n\n        if (!newMode) {\n          // already handled, flush too\n          // Flush image src change for current focus\n          flushImageSrcChange();\n\n          // Clean up any editing element\n          cleanupEditingElement();\n\n          // Clear image element reference\n          focusedImageElementRef.current = null;\n\n          // Clear everything when exiting visual edit mode\n          setHoverBox(null);\n          setHoverBoxes([]);\n          setFocusBox(null);\n          setFocusedElementId(null);\n          lastHitElementRef.current = null;\n          focusedElementRef.current = null;\n          hasStyleChangesRef.current = false;\n\n          setHoverTag(null);\n          setFocusTag(null);\n\n          // Notify parent that we've cleared the selection\n          const msg: ChildToParent = {\n            type: CHANNEL,\n            msg: \"HIT\",\n            id: null,\n            tag: null,\n            rect: null,\n          };\n          postMessageDedup(msg);\n        }\n      }\n\n      // Handle clear inline styles message\n      if (e.data.msg === \"CLEAR_INLINE_STYLES\" && \"elementId\" in e.data) {\n        // Find ALL elements with the same orchids ID\n        const allMatchingElements = document.querySelectorAll(\n          `[data-orchids-id=\"${e.data.elementId}\"]`\n        ) as NodeListOf<HTMLElement>;\n\n        allMatchingElements.forEach((element) => {\n          // Clear only the inline styles we track (typography, spacing, and background)\n          const stylesToClear = [\n            \"fontSize\",\n            \"color\",\n            \"fontWeight\",\n            \"fontStyle\",\n            \"textDecoration\",\n            \"textAlign\",\n            \"paddingLeft\",\n            \"paddingRight\",\n            \"paddingTop\",\n            \"paddingBottom\",\n            \"marginLeft\",\n            \"marginRight\",\n            \"marginTop\",\n            \"marginBottom\",\n            \"backgroundColor\",\n            \"backgroundImage\",\n          ];\n\n          stylesToClear.forEach((prop) => {\n            (element.style as any)[prop] = \"\";\n          });\n        });\n\n        // Clear from our tracking\n        appliedStylesRef.current.delete(e.data.elementId);\n      }\n\n      // Handle show element hover message\n      if (e.data.msg === \"SHOW_ELEMENT_HOVER\" && \"elementId\" in e.data) {\n        const { elementId } = e.data;\n\n        if (!elementId) {\n          // Clear hover boxes if no element ID\n          setHoverBoxes([]);\n          setHoverTag(null);\n          return;\n        }\n\n        // Find ALL elements with the same orchids ID\n        const allMatchingElements = document.querySelectorAll(\n          `[data-orchids-id=\"${elementId}\"]`\n        ) as NodeListOf<HTMLElement>;\n\n        if (allMatchingElements.length > 0) {\n          const boxes: Box[] = [];\n          let tagName = \"\";\n\n          allMatchingElements.forEach((element) => {\n            // Skip if this element is the focused one\n            if (element === focusedElementRef.current) {\n              return;\n            }\n\n            const rect = element.getBoundingClientRect();\n            boxes.push(expandBox(rect));\n\n            if (!tagName) {\n              tagName =\n                element.getAttribute(\"data-orchids-name\") ||\n                element.tagName.toLowerCase();\n            }\n          });\n\n          // Set hover boxes for all matching elements\n          setHoverBoxes(boxes);\n          setHoverTag(boxes.length > 0 ? tagName : null);\n        }\n      }\n    }\n\n    // Handle scroll events to update hover box position\n    function onScroll() {\n      if (isResizingRef.current) return;\n      // Only update hover box if visual edit mode is active\n      if (!isVisualEditModeRef.current) return;\n\n      // Hide hover boxes while scrolling\n      setIsScrolling(true);\n      setHoverBox(null);\n      setHoverBoxes([]);\n\n      // Notify parent that scrolling has started\n      const scrollMsg: ChildToParent = {\n        type: CHANNEL,\n        msg: \"SCROLL_STARTED\",\n      };\n      postMessageDedup(scrollMsg);\n\n      // Reset the notification flag after scrolling stops\n      if (scrollTimeoutRef.current) {\n        clearTimeout(scrollTimeoutRef.current);\n      }\n      scrollTimeoutRef.current = window.setTimeout(() => {\n        setIsScrolling(false);\n        const scrollStopMsg: ChildToParent = {\n          type: CHANNEL,\n          msg: \"SCROLL_STOPPED\",\n        };\n        postMessageDedup(scrollStopMsg);\n      }, 16); // One frame (16ms) for instant restoration\n    }\n\n    // Add event listeners\n    document.addEventListener(\"pointermove\", onPointerMove, { passive: true });\n    document.addEventListener(\"pointerleave\", onPointerLeave);\n    document.addEventListener(\"mousedown\", onMouseDownCapture, {\n      capture: true,\n    });\n    document.addEventListener(\"click\", onClickCapture, { capture: true });\n    window.addEventListener(\"message\", onMsg);\n    window.addEventListener(\"scroll\", onScroll, true);\n\n    return () => {\n      document.removeEventListener(\"pointermove\", onPointerMove);\n      document.removeEventListener(\"pointerleave\", onPointerLeave);\n      document.removeEventListener(\"mousedown\", onMouseDownCapture, true);\n      document.removeEventListener(\"click\", onClickCapture, true);\n      window.removeEventListener(\"message\", onMsg);\n      window.removeEventListener(\"scroll\", onScroll, true);\n      if (scrollTimeoutRef.current) clearTimeout(scrollTimeoutRef.current);\n    };\n  }, [focusedElementId, isResizing]); // Added focusedElementId and isResizing as dependencies\n\n  return (\n    <>\n      {/* Hover box - shows on hover with blue overlay */}\n      {isVisualEditMode && !isResizing && (\n        <>\n          {/* Render all hover boxes for elements with same ID */}\n          {hoverBoxes\n            .filter((box): box is NonNullable<Box> => box !== null)\n            .map((box, index) => (\n              <div key={index}>\n                <div\n                  className=\"orchids-hover-box\"\n                  style={{\n                    zIndex: 100000,\n                    left: box.left,\n                    top: box.top,\n                    width: box.width,\n                    height: box.height,\n                  }}\n                />\n                {/* Tag label on each hover box */}\n                {hoverTag && (\n                  <div\n                    className=\"orchids-hover-tag\"\n                    style={{\n                      zIndex: 100001,\n                      left: box.left,\n                      top: box.top - 20,\n                    }}\n                  >\n                    {hoverTag}\n                  </div>\n                )}\n              </div>\n            ))}\n        </>\n      )}\n\n      {/* Focus box - shows on click with just border, no overlay */}\n      {isVisualEditMode && focusBox && (\n        <>\n          {focusTag && (\n            <div\n              className=\"orchids-focus-tag\"\n              style={{\n                zIndex: 100003,\n                left: focusBox.left - 4,\n                top: focusBox.top - 16,\n              }}\n            >\n              {focusTag}\n            </div>\n          )}\n\n          <div\n            className=\"orchids-focus-box\"\n            style={{\n              zIndex: 100001,\n              left: focusBox.left,\n              top: focusBox.top,\n              width: focusBox.width,\n              height: focusBox.height,\n            }}\n          />\n\n          {/* Resize handles */}\n          {!isResizing && (\n            <>\n              {/* Corner handles */}\n              <div\n                className=\"orchids-resize-handle orchids-resize-handle-nw resize-handle\"\n                style={{\n                  zIndex: 100002,\n                  left: focusBox.left - 4,\n                  top: focusBox.top - 4,\n                }}\n                onMouseDown={(e) => handleResizeStart(e, \"nw\")}\n              />\n              <div\n                className=\"orchids-resize-handle orchids-resize-handle-ne resize-handle\"\n                style={{\n                  zIndex: 100002,\n                  left: focusBox.left + focusBox.width - 4,\n                  top: focusBox.top - 4,\n                }}\n                onMouseDown={(e) => handleResizeStart(e, \"ne\")}\n              />\n              <div\n                className=\"orchids-resize-handle orchids-resize-handle-sw resize-handle\"\n                style={{\n                  zIndex: 100002,\n                  left: focusBox.left - 4,\n                  top: focusBox.top + focusBox.height - 4,\n                }}\n                onMouseDown={(e) => handleResizeStart(e, \"sw\")}\n              />\n              <div\n                className=\"orchids-resize-handle orchids-resize-handle-se resize-handle\"\n                style={{\n                  zIndex: 100002,\n                  left: focusBox.left + focusBox.width - 4,\n                  top: focusBox.top + focusBox.height - 4,\n                }}\n                onMouseDown={(e) => handleResizeStart(e, \"se\")}\n              />\n\n              {/* Edge handles */}\n              <div\n                className=\"orchids-resize-handle orchids-resize-handle-n resize-handle\"\n                style={{\n                  zIndex: 100002,\n                  left: focusBox.left + focusBox.width / 2 - 4,\n                  top: focusBox.top - 4,\n                }}\n                onMouseDown={(e) => handleResizeStart(e, \"n\")}\n              />\n              <div\n                className=\"orchids-resize-handle orchids-resize-handle-s resize-handle\"\n                style={{\n                  zIndex: 100002,\n                  left: focusBox.left + focusBox.width / 2 - 4,\n                  top: focusBox.top + focusBox.height - 4,\n                }}\n                onMouseDown={(e) => handleResizeStart(e, \"s\")}\n              />\n              <div\n                className=\"orchids-resize-handle orchids-resize-handle-w resize-handle\"\n                style={{\n                  zIndex: 100002,\n                  left: focusBox.left - 4,\n                  top: focusBox.top + focusBox.height / 2 - 4,\n                }}\n                onMouseDown={(e) => handleResizeStart(e, \"w\")}\n              />\n              <div\n                className=\"orchids-resize-handle orchids-resize-handle-e resize-handle\"\n                style={{\n                  zIndex: 100002,\n                  left: focusBox.left + focusBox.width - 4,\n                  top: focusBox.top + focusBox.height / 2 - 4,\n                }}\n                onMouseDown={(e) => handleResizeStart(e, \"e\")}\n              />\n            </>\n          )}\n        </>\n      )}\n    </>\n  );\n}\n\n","/**\n * orchids-visual-edits\n * Main entry point for the visual edits package\n */\n\n// Next.js App Router directive: marks re-exported components as Client Components\n\"use client\";\n\nexport { default as VisualEditsMessenger } from './messenger'\nexport { CHANNEL } from './messenger'\nexport type { ParentToChild, ChildToParent } from './messenger'\n","'use client';\r\n\r\nimport { useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { fetchMe } from '@/store/slices/authSlice';\r\n\r\n/**\r\n * Lightweight client-only component that rehydrates auth state from the httpOnly cookie.\r\n * This keeps the user logged in across page refreshes without changing the auth flow.\r\n */\r\nexport default function AuthBootstrapper() {\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(fetchMe()).catch(() => {\r\n      // Silently ignore – unauthenticated is a valid state\r\n    });\r\n  }, [dispatch]);\r\n\r\n  return null;\r\n}\r\n\r\n","'use client';\r\n\r\nimport { useEffect, useRef } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { hydrateCart } from '@/store/slices/cartSlice';\r\n\r\nconst STORAGE_PREFIX = 'luxerent-cart:';\r\n\r\nfunction getKeyForUser(user) {\r\n  if (!user || !user.id) return `${STORAGE_PREFIX}guest`;\r\n  return `${STORAGE_PREFIX}${user.id}`;\r\n}\r\n\r\nexport default function CartPersistence() {\r\n  const dispatch = useDispatch();\r\n  const user = useSelector((state) => state.auth.user);\r\n  const items = useSelector((state) => state.cart.items);\r\n  const lastKeyRef = useRef(null);\r\n\r\n  // Hydrate cart for current identity on first mount / when user changes\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined') return;\r\n    const key = getKeyForUser(user);\r\n    lastKeyRef.current = key;\r\n    try {\r\n      const raw = window.localStorage.getItem(key);\r\n      const parsed = raw ? JSON.parse(raw) : [];\r\n      dispatch(hydrateCart(Array.isArray(parsed) ? parsed : []));\r\n    } catch {\r\n      dispatch(hydrateCart([]));\r\n    }\r\n  }, [user?.id, dispatch]);\r\n\r\n  // Persist cart whenever items change, scoped to the active identity\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined') return;\r\n    const key = lastKeyRef.current || getKeyForUser(user);\r\n    try {\r\n      window.localStorage.setItem(key, JSON.stringify(items || []));\r\n    } catch {\r\n      // Best-effort only; ignore quota or serialization errors\r\n    }\r\n  }, [items, user]);\r\n\r\n  return null;\r\n}\r\n\r\n"],"names":["handle","msg","import_messenger"],"mappings":"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"}